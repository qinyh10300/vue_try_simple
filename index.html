<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>æµ·é¾Ÿæ±¤ AI å°æ¸¸æˆ</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
  <div id="app">
    <h1>ğŸ¢ æµ·é¾Ÿæ±¤å°æ¸¸æˆ</h1>

    <p><strong>æ±¤é¢ï¼š</strong>{{ puzzle }}</p>

    <input v-model="question" placeholder="è¯·è¾“å…¥ä½ çš„é—®é¢˜..." @keyup.enter="ask">
    <button @click="ask">æé—®</button>
    <button @click="restart">é‡å¼€</button>

    <p v-if="answer"><strong>AI å›ç­”ï¼š</strong>{{ answer }}</p>
  </div>

  <script>
    const app = Vue.createApp({
      data() {
        return {
          puzzle: '',
          question: '',
          answer: ''
        }
      },
      methods: {
        loadPuzzle() {
          fetch('/api/puzzle')
            .then(res => res.json())
            .then(data => {
              this.puzzle = data.prompt;
              this.answer = '';
              this.question = '';
            });
        },
        ask() {
          if (!this.question.trim()) return;
          fetch('/api/ask', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ question: this.question })
          })
          .then(res => res.text())
          .then(data => {
            this.answer = data;
          });
        },
        restart() {
          fetch('/api/restart', { method: 'POST' })
            .then(res => res.json())
            .then(data => {
              this.puzzle = data.prompt;
              this.answer = '';
              this.question = '';
            });
        }
      },
      mounted() {
        this.loadPuzzle();
      }
    });

    app.mount('#app');
  </script>
</body>
</html>
